webpackJsonp([2],{409:function(t,e,i){"use strict";function a(t){i(434)}Object.defineProperty(e,"__esModule",{value:!0});var o=i(426),n=i(423),l=i(1),s=a,r=l(o.a,n.a,!1,s,"data-v-f4534d5c",null);e.default=r.exports},423:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-list",{staticClass:"bg-dark",attrs:{dark:"","no-border":""}},[i("q-list-header",[t._v(" 异常信息\n    "),t.exceptions.length?i("q-chip",{attrs:{color:"red",pointing:"left"}},[t._v("\n      "+t._s(t.exceptions.length)+"\n    ")]):t._e(),t._v(" "),i("q-btn",{staticClass:"float-right on-left",attrs:{round:""},nativeOn:{click:function(e){t.toggleAudio(e)}}},[i("q-icon",{attrs:{name:t.audio.muted?"volume_off":"volume_up"}})],1)],1),t._v(" "),i("q-item",[i("q-item-main",[i("chart",{ref:"chart",attrs:{option:t.option,theme:"light","auto-resize":""}})],1)],1),t._v(" "),i("q-item-separator"),t._v(" "),t._l(t.exceptions,function(e,a){return i("q-item",{key:a,attrs:{link:""},nativeOn:{click:function(i){t.openModal(e)}}},[i("q-item-side",{attrs:{icon:t.getIcon(e.level),color:t.getColor(e.level)}}),t._v(" "),i("q-item-main",[i("q-item-tile",{staticClass:"ellipsis",attrs:{label:"",color:["negative"][e.level]}},[t._v("\n        "+t._s(e.sourceName)+"\n        "),i("time",{staticClass:"float-right"},[t._v(t._s(t._f("formatDate")(e.checkTime)))])]),t._v(" "),i("q-item-tile",{staticClass:"ellipsis",attrs:{sublabel:"",color:["negative"][e.level]}},[t._v("\n        "+t._s(e.message)+"\n      ")])],1)],1)}),t._v(" "),i("q-modal",{ref:"modal-detail",attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"}}},[t.exception?i("q-modal-layout",[i("q-toolbar",{class:"bg-"+t.getColor(t.exception.level),attrs:{slot:"header"},slot:"header"},[i("q-btn",{attrs:{flat:""},nativeOn:{click:function(e){t.closeModal(e)}}},[i("q-icon",{attrs:{name:"keyboard_arrow_left"}})],1),t._v(" "),i("q-toolbar-title",[t._v("\n          【"+t._s(t.getLabel(t.exception.level))+"】\n          "+t._s(t.exception.sourceName)+" "+t._s(t.exception.sourceIP)+"\n          "),i("span",{staticClass:"float-right"},[t._v(t._s(t._f("formatDate")(t.exception.checkTime)))])])],1),t._v(" "),i("dl",{staticClass:"layout-padding"},[i("dt",{staticClass:"bg-light"},[t._v("异常信息")]),t._v(" "),i("dd",[i("pre",[t._v(t._s(t.exception.message))])]),t._v(" "),i("dt",{staticClass:"bg-light"},[t._v("用户信息")]),t._v(" "),i("br"),t._v(" "),i("dd",[i("label",[t._v("用户ID：")]),t._v(t._s(t.exception.userId))]),t._v(" "),i("dd",[i("label",[t._v("设备UUID：")]),t._v(t._s(t.exception.uuid))]),t._v(" "),i("dd",[i("label",[t._v("设备型号：")]),t._v(t._s(t.exception.device))]),t._v(" "),i("dd",[i("label",[t._v("客户端IP：")]),t._v(t._s(t.exception.clientIP))]),t._v(" "),i("dd",[i("label",[t._v("客户端版本号：")]),t._v(t._s(t.exception.clientVersion))]),t._v(" "),i("br"),t._v(" "),t.exception.stackTrace?[i("dt",{staticClass:"bg-light"},[t._v("异常堆栈")]),t._v(" "),i("dd",[i("pre",[t._v(t._s(t.exception.stackTrace))])])]:t._e()],2)],1):t._e()],1)],2)},o=[],n={render:a,staticRenderFns:o};e.a=n},426:function(t,e,i){"use strict";var a=i(132);e.a={data:function(){return{audio:{muted:!1,list:{0:{src:i(437),dom:null},1:{src:i(436),dom:null},2:{src:i(438),dom:null},3:{src:i(435),dom:null}}},option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:5,right:0,bottom:0,left:0,containLabel:!0},xAxis:{type:"category",data:["FATAL","ERROR","WARN","INFO"],axisTick:{alignWithLabel:!0},nameTextStyle:{color:"rgba(255,255,255,0.4)"},axisLine:{lineStyle:{color:"rgba(255,255,255,0.4)"}}},yAxis:{type:"value",splitLine:{show:!1},nameTextStyle:{color:"rgba(255,255,255,0.4)"},axisLine:{lineStyle:{color:"rgba(255,255,255,0.4)"}}},series:{type:"bar",data:[{value:0,itemStyle:{color:"rgba(219,40,40,0.7)"}},{value:0,itemStyle:{color:"rgba(244,67,54,0.7)"}},{value:0,itemStyle:{color:"rgba(242,192,55,0.7)"}},{value:0,itemStyle:{color:"rgba(49,204,236,0.7)"}}]}},exception:null,exceptions:[]}},mounted:function(){this.socket=this.refreshData()},destroyed:function(){this.socket.close()},methods:{getLabel:function(t){return["FATAL","ERROR","WARN","INFO"][t]},getIcon:function(t){return["cancel","error","warning","info"][t]},getColor:function(t){return["negative","red","warning","info"][t]},toggleAudio:function(){var t=!this.audio.muted;this.audio.muted=t,Object.values(this.audio.list).forEach(function(e){e.dom&&!e.dom.paused&&(e.dom.muted=t)})},playSound:function(t){var e=this,i=this.audio.list[t];i.dom?(i.dom.muted=this.audio.muted,i.dom.play()):(i.dom=new Audio(i.src),i.dom.oncanplay=function(i){return e.playSound(t)})},openModal:function(t){this.exception=t,this.$refs["modal-detail"].show()},closeModal:function(){this.$refs["modal-detail"].hide()},refreshData:function(){var t=this;return a.a.socket.getException(null,function(e){var i=e.level;t.exceptions.unshift(e),t.playSound(i),t.option.series.data[i].value+=1,t.$refs.chart.setOption({series:{data:t.option.series.data}})})}}}},431:function(t,e,i){e=t.exports=i(407)(),e.push([t.i,"dd[data-v-f4534d5c],dt[data-v-f4534d5c]{padding:5px 10px}dd>label[data-v-f4534d5c]{display:inline-block;min-width:120px}pre[data-v-f4534d5c]{font-family:inherit;white-space:pre-wrap;word-wrap:break-word}.q-chip[data-v-f4534d5c]{z-index:1}",""])},434:function(t,e,i){var a=i(431);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(406)("4de1950b",a,!0)},435:function(t,e,i){t.exports=i.p+"alert.b8116c7.mp3"},436:function(t,e,i){t.exports=i.p+"error.29e5668.mp3"},437:function(t,e,i){t.exports=i.p+"fatal.8a322db.mp3"},438:function(t,e,i){t.exports=i.p+"warn.8de28bd.mp3"}});