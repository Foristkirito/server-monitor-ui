webpackJsonp([1],{408:function(e,t,a){"use strict";function r(e){a(432)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(425),s=a(420),o=a(1),i=r,l=o(n.a,s.a,!1,i,"data-v-577a0a14",null);t.default=l.exports},412:function(e,t,a){"use strict";function r(e){a(416)}var n=a(414),s=a(413),o=a(1),i=r,l=o(n.a,s.a,!1,i,"data-v-0a4faac4",null);t.a=l.exports},413:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-item",{staticClass:"cursor-pointer",class:{"q-pl-none q-pr-none":e.isTile},attrs:{highlight:""}},[e.icon&&!e.isTile?a("q-item-side",{attrs:{icon:e.icon}}):e._e(),e._v(" "),a("q-item-main",[a("q-item-tile",{attrs:{label:!e.isTile,sublabel:e.isTile}},[e._v(" "+e._s(e.label)+"\n      "),a("span",{staticClass:"float-right"},[e._v(e._s(e.ratio)+" %")])]),e._v(" "),a("q-item-tile",{attrs:{sublabel:""}},[a("q-progress",{staticClass:"round-borders inset-shadow",staticStyle:{height:"10px"},attrs:{percentage:+e.ratio,color:e.color}})],1)],1),e._v(" "),e._t("default"),e._v(" "),a("q-popover",{ref:"popover",attrs:{anchor:"bottom right",self:"bottom left",fit:""},on:{"~show":function(t){e.resizeChart(t)},show:e.onPopoverShow,hide:e.onPopoverHide}},[a("q-card",{attrs:{color:e.color}},[a("q-card-title",[e._v(" "+e._s(e.label)+"\n        "),a("big",{attrs:{slot:"right"},slot:"right"},[e._v(e._s(e.ratio)+" %")])],1),e._v(" "),a("q-card-main",[a("chart",{ref:"chart",attrs:{option:e.option,theme:"light","auto-resize":""}})],1),e._v(" "),a("q-card-separator"),e._v(" "),e.total?a("q-card-main",{nativeOn:{click:function(t){e.$refs.popover.hide(t)}}},[e._v("\n        最大："+e._s(e._f("formatByte")(e.total))+" "),a("br"),e._v("\n        已用："+e._s(e._f("formatByte")(e.used))+" "),a("br"),e._v("\n        剩余："+e._s(e._f("formatByte")(e.free))+" "),a("br")]):e._e()],1)],1)],2)},n=[],s={render:r,staticRenderFns:n};t.a=s},414:function(e,t,a){"use strict";var r=a(134);t.a={props:{"is-tile":Boolean,label:String,icon:String,encode:Object,ratio:[Number,String],total:[Number,String],used:[Number,String],free:[Number,String],records:Array},data:function(){return{pieces:[{min:-1/0,max:0,color:"blue-3"},{min:0,max:70,color:"green-5"},{min:70,max:90,color:"orange-5"},{min:90,max:100,color:"red-5"}],option:a.i(r.a)({yAxis:{max:100},series:{encode:this.encode}})}},computed:{color:function(){return this.getPieceColor(this.ratio)}},watch:{records:function(){this.$refs.popover.showing?(this.needRenderChart=!1,this.renderChart()):this.needRenderChart=!0}},mounted:function(){this.onPopoverHide()},methods:{getPieceColor:function(e){var t=this.pieces,a=!0,r=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var i=s.value;if(e===i.value||e>i.min&&e<=i.max)return i.color}}catch(e){r=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw n}}},onPopoverShow:function(){this.$refs.chart.startAnimation(),this.needRenderChart&&(this.resizeChart(),this.renderChart())},onPopoverHide:function(){this.$refs.chart.stopAnimation()},renderChart:function(){this.$refs.chart.setOption({dataset:{source:this.records}})},resizeChart:function(){var e=this.$el.offsetWidth;this.$refs.chart.resize({width:e,slinet:!0})}}}},415:function(e,t,a){t=e.exports=a(407)(),t.push([e.i,".echarts[data-v-0a4faac4]{height:100px}.q-item-side[data-v-0a4faac4]{min-width:0}.q-card-separator+.q-card-main[data-v-0a4faac4]{background-color:hsla(0,0%,100%,.1);color:hsla(0,0%,100%,.7)}.q-popover[data-v-0a4faac4]{background:none;-webkit-animation:none;animation:none}.q-popover .q-card[data-v-0a4faac4]{margin:0}",""])},416:function(e,t,a){var r=a(415);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(406)("10a29d03",r,!0)},417:function(e,t,a){"use strict";var r=a(424),n=a(422),s=a(1),o=s(r.a,n.a,!1,null,null,null);t.a=o.exports},420:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("q-list",{staticClass:"bg-dark q-mb-md",attrs:{"no-border":"",dark:"",link:""}},[a("q-list-header",[e._v(" 数据库 ")]),e._v(" "),e._l(e.databases,function(t){return a("q-item",{key:t.dataBaseName,nativeOn:{click:function(a){e.switchDatabase(a,t)}}},[a("q-tooltip",[e._v(e._s(t.dataBaseIP))]),e._v(" "),a("q-item-side",{attrs:{icon:"storage",color:t.color}}),e._v(" "),a("q-item-main",[a("q-item-tile",{attrs:{label:""}},[e._v(" "+e._s(t.dataBaseName)+" ")])],1)],1)})],2),e._v(" "),a("q-popover",{ref:"popover",attrs:{"anchor-click":!1,anchor:"bottom right",self:"bottom left","max-height":"90vh",fit:""}},[a("com-database-detail",{attrs:{current:e.current}})],1)],1)},n=[],s={render:r,staticRenderFns:n};t.a=s},422:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.current?a("q-list",{staticClass:"bg-dark",attrs:{"no-border":"",dark:""}},[a("q-list-header",[e._v(" "+e._s(e.current.dataBaseName)+"\n    "),a("span",{staticClass:"float-right on-left"},[e._v("\n      "+e._s(e._f("formatDate")(e.current.status.checkTime))+"\n    ")])]),e._v(" "),a("q-item-group",{attrs:{label:"连接数",icon:"language",status:e.current.status,records:e.current.records,"x-field":{name:"checkTime"},"y-field":[{label:"最大",name:"max_connections"},{label:"可用",name:"max_used_connections"}]}}),e._v(" "),a("q-item-group",{attrs:{label:"总流量",icon:"opacity",status:e.current.status,records:e.current.records,"x-field":{name:"checkTime"},"y-field":[{label:"总流量",name:"traffic_all",type:"byte"},{label:"接收",name:"bytes_received",type:"byte"},{label:"发送",name:"bytes_sent",type:"byte"},{label:"每秒",name:"traffic_perSecond",type:"byte",unit:"/s"}]}}),e._v(" "),a("q-item-separator"),e._v(" "),a("q-item-group",{attrs:{label:"键缓冲",icon:"timelapse",status:e.current.status,records:e.current.records,"x-field":{name:"checkTime"},"y-field":[{label:"使用率",name:"key_used_ratio",unit:"%",ratio:{used:"key_used",free:"key_free",total:"key_total"}},{label:"平均命中率",name:"key_avg_hit_ratio",unit:"%"},{label:"写命中率",name:"key_write_hit_ratio",unit:"%"},{label:"读命中率",name:"key_read_hit_ratio",unit:"%"},{label:"效率",name:"key_efficiency",unit:"%"}]}}),e._v(" "),a("q-item-separator"),e._v(" "),a("q-item-group",{attrs:{label:"查询缓存",icon:"filter_tilt_shift",status:e.current.status,records:e.current.records,"x-field":{name:"checkTime"},"y-field":[{label:"使用率",name:"qcache_used_ratio",unit:"%"},{label:"命中率（查询比）",name:"qcache_hit_select_ratio",unit:"%"},{label:"命中率（插入比）",name:"qcache_hits_inserts_ratio",unit:"%"},{label:"碎片率",name:"qcache_frag_ratio",unit:"%"}]}}),e._v(" "),a("q-item-group",{attrs:{label:"线程缓存",icon:"line_style",status:e.current.status,records:e.current.records,"x-field":{name:"checkTime"},"y-field":[{label:"使用率",name:"thread_cache_used_ratio",unit:"%"},{label:"命中率",name:"thread_cache_hit_ratio",unit:"%"},{label:"连接数",name:"thread_connections"}]}}),e._v(" "),a("q-item-group",{attrs:{label:"表缓存",icon:"rounded_corner",status:e.current.status,records:e.current.records,"x-field":{name:"checkTime"},"y-field":[{label:"使用率",name:"table_cache_used_ratio",unit:"%"},{label:"命中率",name:"table_cache_hit_ratio",unit:"%"},{label:"表创建速度",name:"opened_tables"}]}}),e._v(" "),a("q-item-separator"),e._v(" "),a("q-item-group",{attrs:{label:"临时表创建",icon:"flip_to_front",status:e.current.status,records:e.current.records,"x-field":{name:"checkTime"},"y-field":[{label:"内存临时表数量",name:"created_tmp_tables"},{label:"磁盘临时表数量",name:"created_tmp_disk_tables"},{label:"磁盘临时表占比",name:"created_tmp_tables_on_disk_ratio",unit:"%"},{label:"磁盘临时文件数量",name:"created_tmp_files"}]}}),e._v(" "),a("q-item-group",{attrs:{label:"MySQL 查询",icon:"search",status:e.current.status,records:e.current.records,"x-field":{name:"checkTime"},"y-field":[{label:"Insert 语句",name:"inserted"},{label:"Update 语句",name:"updated"},{label:"Delete 语句",name:"deleted"},{label:"Select 语句",name:"selected"},{label:"Select 查询状态",name:"selects_perSecond",unit:"kb/s"}]}}),e._v(" "),a("q-item-group",{attrs:{label:"排序操作",icon:"sort",status:e.current.status,records:e.current.records,"x-field":{name:"checkTime"},"y-field":[{label:"总次数",name:"sort_times"}]}}),e._v(" "),a("q-item-separator"),e._v(" "),a("q-item-group",{attrs:{label:"InnoDB 缓冲池",icon:"pool",status:e.current.status,records:e.current.records,"x-field":{name:"checkTime"},"y-field":[{label:"使用率",name:"innodb_buffer_pool_pages_usage",unit:"%"},{label:"读命中率",name:"innodb_buffer_pool_pages_read_hit_ratio",unit:"%"},{label:"读次数（磁盘）",name:"innodb_buffer_pool_reads"},{label:"读次数（内存-随机）",name:"innodb_buffer_pool_read_ahead_rnd"},{label:"读次数（内存-顺序）",name:"innodb_buffer_pool_read_ahead_seq"},{label:"刷新次数",name:"innodb_buffer_pool_pages_flushed"},{label:"读请求次数",name:"innodb_buffer_pool_read_requests"},{label:"写请求次数",name:"innodb_buffer_pool_write_requests"},{label:"数据读操作耗时",name:"innodb_pool_reads_perSecond",unit:"KB/s"},{label:"数据写操作耗时",name:"innodb_pool_reads_perSecond",unit:"KB/s"},{label:"已完成的 Insert 语句",name:"innodb_rows_inserted"},{label:"已完成的 Update 语句",name:"innodb_rows_updated"},{label:"已完成的 Delete 语句",name:"innodb_rows_deleted"}]}})],1):e._e()},n=[],s={render:r,staticRenderFns:n};t.a=s},424:function(e,t,a){"use strict";var r=a(412),n=a(133);t.a={components:{QItemRatio:r.a,QItemGroup:n.a},props:{current:Object}}},425:function(e,t,a){"use strict";function r(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,r=e.length;e[r]=t,r>a?e.shift():e.__ob__.dep.notify()}var n=a(132),s=a(417);t.a={components:{comDatabaseDetail:s.a},data:function(){return{current:null,databases:{}}},mounted:function(){this.socket=this.refreshData()},destroyed:function(){this.socket.close()},methods:{refreshData:function(){var e=this;return n.a.socket.getDatabaseInfo(null,function(t){var a=t.sourceID,n=t.dataBaseName,s=t.dataBaseIP,o=e.databases[a];o||(o={status:{},records:[]},e.$set(e.databases,a,o),Object.assign(o,{sourceID:a,dataBaseName:n,dataBaseIP:s}));var i=t.key_used,l=t.key_free;t.key_total=i+l,o.status=Object.assign({},t),r(o.records,t,60)})},switchDatabase:function(e,t){this.current=t,this.$refs.popover.anchorEl=e.currentTarget||e.srcElement,this.$refs.popover.toggle()}}}},429:function(e,t,a){t=e.exports=a(407)(),t.push([e.i,".q-popover[data-v-577a0a14]{background:none}",""])},432:function(e,t,a){var r=a(429);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(406)("47001534",r,!0)}});